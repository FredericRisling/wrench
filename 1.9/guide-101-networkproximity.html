<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.17"/>
    <title>WRENCH: Creating a network proximity service</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src="bootstrap.min.js"></script>
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <script type="text/javascript" src="jquery.smartmenus.js"></script>
    <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a href="https://wrench-project.org" class="navbar-brand">
                <img alt="Logo" src="logo-horizontal.png" width="160" style="float: left"/>
                1.9
            </a>
        </div>
        <div id="main-nav" class="nav navbar-nav navbar-right">
            <ul class="sm sm-dox nav navbar-nav navbar-right" id="main-menu">
                <li class="nav-item"><a class="nav-link" href="/wrench/1.9/index.html">Overview</a></li>
                <li class="nav-item"><a class="nav-link" href="/wrench/1.9/install.html">Installation</a>
                </li>
                <li class="nav-item"><a class="nav-link" href="/wrench/1.9/getting-started.html">Getting
                    Started</a></li>
                <li class="nav-item"><a class="nav-link" href="/wrench/1.9/wrench-101.html">WRENCH 101</a>
                </li>
                <li class="nav-item"><a class="nav-link" href="/wrench/1.9/wrench-102.html">WRENCH 102</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                       aria-haspopup="true" aria-expanded="false">APIs Reference</a>
                    <div class="dropdown-menu">
                        <a class="small dropdown-item" href="/wrench/1.9/user/annotated.html">User</a>
                        <a class="small dropdown-item"
                           href="/wrench/1.9/developer/annotated.html">Developer</a>
                        <a class="small dropdown-item"
                           href="/wrench/1.9/internal/annotated.html">Internal</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div id="top" style="padding-top: 4em !important"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Creating a network proximity service </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="guide-networkproximity-overview"></a>
Overview</h1>
<p>A network proximity service answers queries regarding the network proximity between hosts. The service accomplishes this by periodically performing round-trip network transfer experiments between hosts, keeping a record of observed network transfer times, and computing network distances.</p>
<h1><a class="anchor" id="guide-networkproximity-creating"></a>
Creating a network proximity service</h1>
<p>In WRENCH, a network proximity service is defined by the <code><a class="el" href="classwrench_1_1_network_proximity_service.html" title="A network proximity service that continuously estimates inter-host latencies and can be queried for s...">wrench::NetworkProximityService</a></code> class, an instantiation of which requires the following parameters:</p>
<ul>
<li>The name of a host on which to start the service;</li>
<li>A set of hosts names in a vector (<code>std::vector</code>), which define which hosts are monitored by the service; and</li>
<li>Maps (<code>std::map</code>) of configurable properties (<code><a class="el" href="classwrench_1_1_network_proximity_service_property.html" title="Configurable properties for a NetworkProximityService.">wrench::NetworkProximityServiceProperty</a></code>) and configurable message payloads (<code><a class="el" href="classwrench_1_1_network_proximity_service_message_payload.html" title="Configurable message payloads for a NetworkProximityService.">wrench::NetworkProximityServiceMessagePayload</a></code>).</li>
</ul>
<p>The example below creates an instance that runs on host <code>Networkcentral</code>, and can answer network distance queries about hosts <code>Host1</code>, <code>Host2</code>, <code>Host3</code>, and <code>Host4</code>. The service's properties are customized to specify that the service performs network transfer experiments on average every 60 seconds, that the Vivaldi algorithm is used to compute network coordinates, and that the message sent to the service to lookup an entry is configured to be 1KiB:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> np_service = simulation-&gt;<a class="code" href="classwrench_1_1_simulation.html#a7cf70e5793758149a8bf29992d870c91">add</a>(</div>
<div class="line">          <span class="keyword">new</span> <a class="code" href="classwrench_1_1_network_proximity_service.html">wrench::NetworkProximityService</a>(<span class="stringliteral">&quot;Networkcentral&quot;</span>, </div>
<div class="line">                                       {<span class="stringliteral">&quot;Host1&quot;</span>, <span class="stringliteral">&quot;Host2&quot;</span>, <span class="stringliteral">&quot;Host3&quot;</span>, <span class="stringliteral">&quot;Host4&quot;</span>},</div>
<div class="line">                                       {{<a class="code" href="classwrench_1_1_network_proximity_service_property.html#ae186f459f35a78e808d406f74483e418">wrench::NetworkProximityServiceProperty::NETWORK_PROXIMITY_MEASUREMENT_PERIOD</a>, <span class="stringliteral">&quot;60&quot;</span>},</div>
<div class="line">                                        {<a class="code" href="classwrench_1_1_network_proximity_service_property.html#a4cb766dcd609012ab68000cfd9dc11b1">wrench::NetworkProximityServiceProperty::NETWORK_PROXIMITY_SERVICE_TYPE</a>, <span class="stringliteral">&quot;VIVALDI&quot;</span>}},</div>
<div class="line">                                       {{<a class="code" href="classwrench_1_1_network_proximity_service_message_payload.html#a495eafbd2b9f58a992d20ed10bc714d4">wrench::NetworkProximityServiceMessagePayload::NETWORK_DB_LOOKUP_REQUEST_MESSAGE_PAYLOAD</a>, <span class="stringliteral">&quot;1024&quot;</span>}});</div>
</div><!-- fragment --><p>See the documentation of <code><a class="el" href="classwrench_1_1_network_proximity_service_property.html" title="Configurable properties for a NetworkProximityService.">wrench::NetworkProximityServiceProperty</a></code> and <code><a class="el" href="classwrench_1_1_network_proximity_service_message_payload.html" title="Configurable message payloads for a NetworkProximityService.">wrench::NetworkProximityServiceMessagePayload</a></code> for all possible configuration options. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclasswrench_1_1_network_proximity_service_property_html_ae186f459f35a78e808d406f74483e418"><div class="ttname"><a href="classwrench_1_1_network_proximity_service_property.html#ae186f459f35a78e808d406f74483e418">wrench::NetworkProximityServiceProperty::NETWORK_PROXIMITY_MEASUREMENT_PERIOD</a></div><div class="ttdeci">static const std::string NETWORK_PROXIMITY_MEASUREMENT_PERIOD</div><div class="ttdoc">The inter-measurement period (in seconds) to be used (default: 60)</div><div class="ttdef"><b>Definition:</b> NetworkProximityServiceProperty.h:37</div></div>
<div class="ttc" id="aclasswrench_1_1_simulation_html_a7cf70e5793758149a8bf29992d870c91"><div class="ttname"><a href="classwrench_1_1_simulation.html#a7cf70e5793758149a8bf29992d870c91">wrench::Simulation::add</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; add(T *t)</div><div class="ttdoc">Method to add a service to the simulation.</div><div class="ttdef"><b>Definition:</b> Simulation.h:73</div></div>
<div class="ttc" id="aclasswrench_1_1_network_proximity_service_message_payload_html_a495eafbd2b9f58a992d20ed10bc714d4"><div class="ttname"><a href="classwrench_1_1_network_proximity_service_message_payload.html#a495eafbd2b9f58a992d20ed10bc714d4">wrench::NetworkProximityServiceMessagePayload::NETWORK_DB_LOOKUP_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string NETWORK_DB_LOOKUP_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the message sent to the service to request a proximity value lookup.</div><div class="ttdef"><b>Definition:</b> NetworkProximityServiceMessagePayload.h:24</div></div>
<div class="ttc" id="aclasswrench_1_1_network_proximity_service_html"><div class="ttname"><a href="classwrench_1_1_network_proximity_service.html">wrench::NetworkProximityService</a></div><div class="ttdoc">A network proximity service that continuously estimates inter-host latencies and can be queried for s...</div><div class="ttdef"><b>Definition:</b> NetworkProximityService.h:26</div></div>
<div class="ttc" id="aclasswrench_1_1_network_proximity_service_property_html_a4cb766dcd609012ab68000cfd9dc11b1"><div class="ttname"><a href="classwrench_1_1_network_proximity_service_property.html#a4cb766dcd609012ab68000cfd9dc11b1">wrench::NetworkProximityServiceProperty::NETWORK_PROXIMITY_SERVICE_TYPE</a></div><div class="ttdeci">static const std::string NETWORK_PROXIMITY_SERVICE_TYPE</div><div class="ttdoc">The type of network proximity implementation to be used:</div><div class="ttdef"><b>Definition:</b> NetworkProximityServiceProperty.h:31</div></div>
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<div class="footer">
    <div class="container">
        <div class="row">
            <div class="col-sm-4">
                <p>
                    <strong>&copy;2017-2020 WRENCH. All Rights Reserved.</strong><br />
                </p>
                <p style="padding-top: 1em">
                    <a href="mailto:support@wrench-project.org" class="fa-stack fa-2x" style="font-size: 1.5em">
                        <i class="fa fa-circle fa-stack-2x" style="color: #fff"></i>
                        <i class="fa fa-envelope fa-stack-1x"></i>
                    </a>
                    <a href="http://twitter.com/wrenchproject" target="_blank" class="fa-stack fa-2x"
                       style="font-size: 1.5em">
                        <i class="fa fa-circle fa-stack-2x" style="color: #fff"></i>
                        <i class="fab fa-twitter fa-stack-1x"></i>
                    </a>
                    <a href="https://github.com/wrench-project/wrench" target="_blank" class="fa-stack fa-2x"
                       style="font-size: 1.5em">
                        <i class="fa fa-circle fa-stack-2x" style="color: #fff"></i>
                        <i class="fab fa-github fa-stack-1x"></i>
                    </a>
                </p>
            </div>
            <div class="col-sm-4 text-center">
            </div>
            <div class="col-sm-4">
                <p>WRENCH is funded by the National Science Foundation (NSF) under grants number <a
                        href="https://nsf.gov/awardsearch/showAward?AWD_ID=1642369" target="_blank">1642369</a>,
                    <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1642335" target="_blank">1642335</a>,
                    <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1923539" target="_blank">1923539</a>, and
                    <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1923621" target="_blank">1923621</a>;
                    and the National Center for Scientific Research (CNRS) under grant number PICS07239.
                </p>
                <p style="font-weight: normal; font-size: 0.8em; margin-top: 1em">
                    Any opinions, findings, and conclusions or recommendations expressed in this material are those
                    of the author(s) and do not necessarily reflect the views of the National Science Foundation.
                </p>
            </div>
        </div>
    </div>
</div>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-18066333-6', 'auto');
    ga('send', 'pageview');
</script>
</body>
<script type="text/javascript" src="doxy-boot.js"></script>
</html>
